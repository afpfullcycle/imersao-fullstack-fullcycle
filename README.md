<p align="center">
    <img src="https://events-fullcycle.s3.amazonaws.com/events-fullcycle/static/site/img/grupo_4417.png" />
</p>

# Aulas ImersÃ£o FullStack FullCycle

## Aula 1

### Tenha um dos perfis mais desejados do mercado

```shell
mkdir -p ~/projects/imersao-fsfc/codepix
curl -fs https://raw.githubusercontent.com/codeedu/imersao-fullstack-fullcycle/main/codepix/Dockerfile -o ~/projects/imersao-fsfc/codepix/Dockerfile
curl -fs https://raw.githubusercontent.com/codeedu/imersao-fullstack-fullcycle/main/codepix/docker-compose.yaml -o ~/projects/imersao-fsfc/codepix/docker-compose.yaml
curl -fs https://raw.githubusercontent.com/codeedu/imersao-fullstack-fullcycle/main/codepix/.gitignore -o ~/projects/imersao-fsfc/codepix/.gitignore
code ~/projects/imersao-fsfc/codepix
```

```terminal
docker-compose up -d
docker-compose ps -a
docker exec -it codepix_app_1 bash
go mod init github.com/afpfullcycle/imersao-fullstack-fullcycle/codepix-go
mkdir -p ./domain/model
touch ./domain/model/{account,bank,base,pixKey,transaction}.go
```

- bank.go
    - Imported govalidater, go.uuid and time
    - Created struct Bank
    - Created method isValid
    - Created function NewBank

- base.go
    - Imported govalidater and time
    - Created struct Base
    - Created function init govalidator

- account.go
    - Imported govalidater, go.uuid and time
    - Created struct Account
    - Created method isValid
    - Created function NewAccount

- pixKey.go
    - Imported errors, govalidator, go.uuid and time
    - Created interface PixKeyRepositoryInterface
    - Created struct PixKey
    - Created method isValid
    - Created function NewPixKey

- transaction.go
    - Imported errors, govalidator, go.uuid and time
    - Created status constants
    - Created interface TransactionRepositoryInterface
    - Created struct Transactions and Transaction
    - Created method isValid
    - Created function NewTransaction
    - Created methods Complete, Confirm and Cancel


```terminal
git config --global user.email "user@email.com"
git config --global user.name "Name"
git init
git add .
git commit -m "Codepix: Aula 1"
git branch -M main
git remote add origin https://github.com/afpfullcycle/imersao-fullstack-fullcycle.git
git checkout -b aula1
git add .
git commit -m "Codepix: Aula 1"
git push -u origin aula1
```

### gRPC e o abismo entre devs e empresas

```terminal
touch ./.env
mkdir -p ./infrastructure/{db,repository} ./application/{usecase,grpc/{protofiles,pb}} ./cmd
touch ./infrastructure/db/db.go ./infrastructure/repository/{pix,transaction}.go ./application/usecase/{pix,transaction}.go ./application/grpc/protofiles/pixkey.proto ./application/grpc/{server,pix}.go
protoc --go_out=application/grpc/pb --go_opt=paths=source_relative --go-grpc_out=application/grpc/pb --go-grpc_opt=paths=source_relative --proto_path=application/grpc/protofiles application/grpc/protofiles/*.proto
cobra init --pkg-name codepix
cobra add grpc
```

- .gitignore
    - Added more files or directory to ignore

- .env
    - Created dev environment to database

- db.go
    - Imported log, os, filepath, runtime, model, gorm, godotenv, pq and sqlite
    - Created function init basepath
    - Created function ConnectDB

- account.go
    - Adjusted struct Account

- pixKey.go
    - Adjusted struct PixKey

- model/transaction.go
    - Adjusted struct Transaction

- bank.go
    - Adjusted struct Bank

- repository/pix.go
    - Imported fmt, model and gorm
    - Created struct PixKeyRepositoryDb
    - Created methods AddBank, AddAccount, RegisterKey, FindKeyByKind, FindAccount and FindBank

- repository/transaction.go
    - Imported fmt, model and gorm
    - Created struct TransactionRepositoryDb
    - Created methods Register, Save and Find

- usecase/pix.go
    - Imported model
    - Created struct PixUseCase
    - Created methods RegisterKey and FindKey

- usecase/transaction.go
    - Imported errors, log and model
    - Created struct TransactionUseCase
    - Created methods Register, Confirm, Complete and Error

- pixkey.proto
    - Created messages types
    - Created return service rpc

- server.go
    - Imported fmt, pb, usecase, repository, gorm, grpc, reflection, log and net
    - Created function StartGrpcServer

- pix.go
    - Imported context, pb and usecase
    - Created struct PixGrpcService
    - Created methods RegisterPixKey and Find
    - Created function NewPixGrpcService

- root.go
    - Generated by cobra init command
    - Adjusted variable rootCmd

- grpc.go
    - Generated by cobra add command
    - Adjusted variable grpcCmd
    - Adjusted function init

- main.go
    - Generated by cobra add command

```terminal
go run main.go
go run main.go grpc
    >> After this command, the tables were generated in the database
```
